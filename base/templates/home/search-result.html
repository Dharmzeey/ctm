{% extends 'base/base.html' %}

{% block title %}
<title>Campus Trade Mart</title>
{% endblock %}

{% block content %}

<div>
  <form action="{% url 'search' %}">
    <label for="q">
      <input type="text" name="q" id="q" placeholder="Search Products">
    </label>
  </form>
</div>

<div>
  <div>Current Viewing State: {{ request.session.viewing_state|default:"Not Set" }}
    {{ form.state }}
  </div>
  <div>Current Viewing Location: {{ request.session.viewing_location|default:"Not Set" }}
    {{ form.location }}
  </div>
  <div>Current Viewing Institution: {{ request.session.viewing_institution|default:"Not Set" }}
    {{ form.institution }}
  </div>
</div>

{% if goods %}
<section id="goods">
  <h1 class="font-bold py-4 text-xl">Goods</h1>
  <div class="grid-items">
    {% for good in goods %}
    <div class="w-full h-full bg-white">
      <a class="flex flex-col justify-between" href="{% url 'store:detail_product' store_name=good.store.store_name product_uuid=good.uuid  %}">
        <div class="img-wrapper">
          <img class="rounded-t-md" src="{{ good.thumbnail.url }}" alt="{{ good.title }}">
        </div>
        <div class="px-4">
          <div class="pt-4">{{ good.title }}</div>
          <div>
            <small>&#8358; {{ good.price }}</small>
          </div>
        </div>
      </a>
      <small class="m-4 mb-6">
        <a class="link" href="{% url 'store:detail_store' store_name=good.store.store_name %}">{{ good.store.store_name }}</a>
      </small>
    </div>
    {% endfor %}
  </div>
</section>
{% endif %}
{% endblock %}